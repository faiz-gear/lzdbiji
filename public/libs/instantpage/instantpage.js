let urlToPreload;let mouseoverTimer;let lastTouchTimestamp;const prefetcher=document.createElement("link");const isSupported=prefetcher.relList&&prefetcher.relList.supports&&prefetcher.relList.supports("prefetch");const isDataSaverEnabled=navigator.connection&&navigator.connection.saveData;const allowQueryString="instantAllowQueryString"in document.body.dataset;const allowExternalLinks="instantAllowExternalLinks"in document.body.dataset;const useWhitelist="instantWhitelist"in document.body.dataset;let delayOnHover=65;let useMousedown=false;let useMousedownOnly=false;if("instantIntensity"in document.body.dataset){if(document.body.dataset.instantIntensity.substr(0,"mousedown".length)=="mousedown"){useMousedown=true;if(document.body.dataset.instantIntensity=="mousedown-only"){useMousedownOnly=true}}else{const milliseconds=parseInt(document.body.dataset.instantIntensity);if(!isNaN(milliseconds)){delayOnHover=milliseconds}}}if(isSupported&&!isDataSaverEnabled){prefetcher.rel="prefetch";document.head.appendChild(prefetcher);const eventListenersOptions={capture:true,passive:true};if(!useMousedownOnly){document.addEventListener("touchstart",touchstartListener,eventListenersOptions)}if(!useMousedown){document.addEventListener("mouseover",mouseoverListener,eventListenersOptions)}else{document.addEventListener("mousedown",mousedownListener,eventListenersOptions)}}function touchstartListener(e){lastTouchTimestamp=performance.now();const t=e.target.closest("a");if(!isPreloadable(t)){return}t.addEventListener("touchcancel",touchendAndTouchcancelListener,{passive:true});t.addEventListener("touchend",touchendAndTouchcancelListener,{passive:true});urlToPreload=t.href;preload(t.href)}function touchendAndTouchcancelListener(){urlToPreload=undefined;stopPreloading()}function mouseoverListener(e){if(performance.now()-lastTouchTimestamp<1100){return}const t=e.target.closest("a");if(!isPreloadable(t)){return}t.addEventListener("mouseout",mouseoutListener,{passive:true});urlToPreload=t.href;mouseoverTimer=setTimeout(()=>{preload(t.href);mouseoverTimer=undefined},delayOnHover)}function mousedownListener(e){const t=e.target.closest("a");if(!isPreloadable(t)){return}t.addEventListener("mouseout",mouseoutListener,{passive:true});urlToPreload=t.href;preload(t.href)}function mouseoutListener(e){if(e.relatedTarget&&e.target.closest("a")==e.relatedTarget.closest("a")){return}if(mouseoverTimer){clearTimeout(mouseoverTimer);mouseoverTimer=undefined}urlToPreload=undefined;stopPreloading()}function isPreloadable(e){if(!e||!e.href){return}if(urlToPreload==e.href){return}if(useWhitelist&&!("instant"in e.dataset)){return}if(!allowExternalLinks&&e.origin!=location.origin&&!("instant"in e.dataset)){return}if(!["http:","https:"].includes(e.protocol)){return}if(e.protocol=="http:"&&location.protocol=="https:"){return}if(!allowQueryString&&e.search&&!("instant"in e.dataset)){return}if(e.hash&&e.pathname+e.search==location.pathname+location.search){return}if("noInstant"in e.dataset){return}return true}function preload(e){prefetcher.href=e}function stopPreloading(){prefetcher.removeAttribute("href")}